# Пагинация в Django - простой и удобной способ дозирования информации.

Зачастую в базе данных может накопиться огромное количество информации, и выдавать браузеру 200 статей блога или 2000 единиц товара - верный способ потерять посетителя ресурса. Для регулировки объёма поступаемых данных придумали пагинацию (от английского "page" - страница), способ выдавать данные постранично.

В Django на уровне ядра есть модуль, в котором есть всё необходимое, импортируется в одну строку:
```Python
from django.core.paginator import Paginator, PageNotAnInteger, EmptyPage
```

Из учебного проекта по созданию магазина (часть функции поиска товара по запросу):
```Python
products = Product.objects.filter(
	Q(title__icontains=query) |
	Q(country__icontains=query) |
	Q(description__icontains=query)
	)
page = request.GET.get('page', 1)
paginator = Paginator(products, 4)
try:
	products = paginator.page(page)
except PageNotAnInteger:
	products.paginator.page(1)
except EmptyPage:
	products.paginator.page(paginator.num_pages)
products = paginator.page(page)
```

Интересно то, что Paginator'у всё равно, куда пойдут эти данные - шаблону для отрисовки веб-страницы или jsonify для отправки приложению через API, он делает ровно одну функцию - выделение необходимого куска данных для передачи.

В моём коде сначала находятся все товары, в ключевых полях которых встречается слово, переданное в запросе. Потом из запроса берётся номер страницы. Дальше дело за малым:
- Создаётся объект Paginator, которому передаётся пакет полученных объектов и целое число - количество объектов на одной странице.
- У Paginator'а запрашивается конкретная страница из пакета с объектами. Всё. Надо обработать нештатные ситуации.
- Если всё-таки передали не число, то я предпочитаю возвращать первую страницу, как будто ничего не произошло.
- Если передали запредельно большое число, то Paginator сгенерирует страницу без объектов. Очевидно, что это не то, чего я от него жду, поэтому я передаю содержимое последней страницы.

Всё, технология простая и очень удобная. Благодаря ей не ломается дизайн и не нагружается сеть, что в эпоху мобильных приложений снова стало важным.