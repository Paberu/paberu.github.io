<!DOCTYPE html>
<html>
<head>
	<title>
		Yet another one IT blog.
	</title>
</head>
<body>
	<h1>Функции в Python</h1>
		<h2>Пользовательские, сторонние и встроенные.</h2>
			<h3>Пользовательские</h3>

<code style="white-space: pre;">
def имя_функции(параметры):
    тело_функции
    return результат  # опционально
</code>
<p>Параметров может и не быть, например, если функция должна что-то сгенерировать и отдать.<br />
Функция может возвращать несколько значений: `return good, bad, ugly`. Если количество возвращаемых значений и количество переменных, в которые они сохраняются, не совпадает, в последнюю переменную упадёт кортеж из оставшихся значений. Функция, не имеющая `return` незаметно (неявно) возвращает `None`.</p>

<h3>Сторонние</h3>
<p>По сути своей, те же пользовательские, с той лишь разницей, что написал их кто-то другое (возможно, что и мы сами, когда создавали библиотеку или фреймворк), и в нашем коде просто производится импорт функции, класса или всего пакета.</p>

<h3>Встроенные</h3>
<p>Те же сторонние просто написаны авторами языка, входят в стандартную библиотеку.</p>

<h2>По количеству аргументов</h2>
<h3>Функции с фиксированным количеством аргументов</h3>
<p>Параметры передаются через запятую, заданных по умолчанию параметров нет, количество передаваемых аргументов должно совпадать с определением функции.</p>

<h3>Функции с плавающим количеством аргументов</h3>

<p>Можно реализовать несколькими способами:<br />
- параметры передаются через запятую, но у некоторых параметров есть значения по умолчанию (тогда можно не указывать значения тех, что не отличаются от дефолтных, например, `sep=' '` и `end='\n'` при вызове `print`);<br />
- параметры передаются списком `*args`;<br />
- параметры передаются словарём `**kwargs`.</p>

<h2>По структуре</h2>
<h3>Внутренние функции</h3>
<p>Логичнее всего создавать их для того, чтобы выделить повторяющийся во внешней функции код, но при этом не плодить методы в классе или функции в модуле. Так реализуется <i>принцип единой ответственности</i>.</p>
<p>Понимание внутренних (они же вложенные) функций необходимы для применения более сложных концепций - замыканий и декораторов.</p>

<h3>Замыкания</h3>
<p>Функция возвращает внутреннюю функцию, вместе с которой в памяти хранятся внешний по отношению к ней объект (статический или динамический). Такой подход позволят на ходу генерировать функции, просто вызывая внешнюю с нужными параметрами.</p>

<h3>Декораторы</h3>
<p>По сути, декоратор - это синтаксический сахар для вызова функции с именем декоратора, аргументом которой будет декорируемая функция. Например, функция может просто вычислять и возвращать результат вычислений, но если таких функций много, то все проверки прав доступа имеет смысл вынести в функцию-декоратор, которая и будет проверять, имеет ли пользователь право запрашивать тот или иной результат вычислений. Нет нужды проверять это в каждой функции или в каждом классе, но при этом можно написать достаточно дотошную проверку, потому что это не разбарабанит код.</p>

<h3>Анонимные (lambda)</h3>
<p>Их не создают по правилам создания пользовательских функций, у них нет имени и их не собираются использовать повторно. Поэтому они и анонимные.<p>
<code style="white-space: pre;">
lambda argument: manipulate(argument)
</code>
<p>Они идентичны обыкновенным функциям, но их удобно использовать, например, при вычислении принципа сортировки кортежа кортежей или списка списков.</p>

<h3>Рекурсивные</h3>

<p>Функции, которые вызывают сами себя и при этом используют результат предыдущего вызова.  Для этого прописывается 2 ситуации:<br />
- граничная, при которой функция завершает работу и возвращает результат;<br />
- рекурсивный, при котором функция вызывает саму себя, но с некоторыми поправками с аргументах.</p>
<p>Рекурсивные функции всегда медленнее итерационных, нагружают стек вызовов и затрудняют понимание код. Для ускорения можно использовать мемоизацию: сама функция перестаёт быть рекурсивной, при этом внутри неё создаётся внутренняя рекурсивная функция и некий параметр, в котором аккумулируются результаты промежуточных вызовов внутренней функции.</p>
</body>
</html>