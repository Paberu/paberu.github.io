<!DOCTYPE html>
<html>
<head>
	<title>
		Yet another one IT blog.
	</title>
</head>
<body>
	<h1>Насколько важна зарплатная вилка в вакансии? Изменения в парсере з/п в приложении HeadHunterParser.</h1>
	<p>В моём проекте HeadHunterParser есть функция, которая выдёргивает из вакансии размер зарплаты, если таковая указана. Это важное уточнение: я обнаружил, что вакансии, например, от Сбера или Совкомбанка слишком часто (но не буду бросаться громким словом "всегда") вообще не содержат информации об оплате труда. Это наводит на мысль, что в компании настолько большая зарплатная вилка на схожих должностях, что её предпочитают не светить.</p>
	
	<p>Тем не менее, вакансии с конкретными зарплатами условно делятся на 3 типа:</p>
	
	<ul>
		<li>з/п составляет N денег;</li>
		<li>з/п составляет до N денег;</li>
		<li>з/п составляет от N-M до N денег.</li>
	</ul>
	
	<p>Если кто-то не в курсе, практически ни в одной из указанных ситуаций компания не намерена платить N. Не важно, как сформулирован этот раздел вакансии, почти всегда HR компании будет стараться донести до Вас мысль, что чего-то Вы не знаете, чем-то ранее не занимались, а значит, несмотря на Ваш опыт, полное (максимальное) вознаграждение Вам платить не следует. И всё равно, при всём при этом, неужели нам интересно, что уровень "до N" начинается с какого-то конкретного значения, а не "из воздуха"? Из сказанного следует, что в вакансии нас будет интересовать только верхняя планка, как наиболее интересный для нас вариант.</p>
	
	<p>Так же в вакансиях с з/п есть указание валюты, и фразы "до уплаты налогов" или "на руки".</p>

	<p>Функция, которая выцепляет информацию о з/п из вакансии, сначала приводит всё к единому, рублёвому эквиваленту, и вычитает налоги, т.к. так легче сравнивать вакансии между собой. Но совсем ещё недавно функция возвращала массив данных из одного или двух (в случае "от" и "до") значения. После понимания, о котором я сказал выше, в функции появилось исправление, которое тащит за собой достаточно крупные последствия.</p>

	<p>Там, где было:<br />
<code style="white-space: pre;">
salary_delta = list(map(int, money_template.findall(salary)))
</code></p>
	<p>стало:<br />
<code style="white-space: pre;">
max_salary = max(map(int, money_template.findall(salary)))
</code></p>

	<p>Там, где было:<br />
<code style="white-space: pre;">
for i in range(len(salary_delta)):
    if tax_flag == 'до вычета налогов':
        salary_delta[i] = round(salary_delta[i] * (1 - TAXES))
    salary_delta[i] = salary_delta[i] * COURSES[currency]
return salary_delta
</code></p>
	<p>стало:
<code style="white-space: pre;">
if tax_flag == 'до вычета налогов':
    max_salary = round(max_salary * (1 - TAXES))
max_salary = max_salary * COURSES[currency]
return max_salary
</code></p>

	<p>Люблю такие моменты: упрощение в коде происходит не благодаря паттернам проектирования или хитрым конструкциям, а благодаря изучению предметной области.</p>
	
</body>
</html>